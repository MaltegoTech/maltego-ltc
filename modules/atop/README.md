# ATOP Maltego Transform
A new Maltego local transform useful to make investigations on TON assets like TON nickname, TON DNS and TON Telephone Number. These kinds of entities are NFT based on The Open Network. The transform is base on [ATOP](https://github.com/aaarghhh/a_TON_of_privacy).  


## REQUIREMENTS
To run ATOP Maltego transform you need:
- Python3 and pip 
- Install atop `pip install "atop>=0.1.8"`
- Install Maltego CE
- Follow the installation procedure of [Maltego-ltc](https://github.com/MaltegoTech/maltego-ltc)
- Install Entities from the packege atop.local.mtz
- Define your .env file following this [specs](https://github.com/MaltegoTech/maltego-ltc/modules/atop/README#telegram-pivoting)

## INSTALLATION

Firstly, we have to download the project and copy or directly clone it in a directory related to Maltego-ltc.


## EXECUTION

From a Domain, Alias or Telephone entity we'll be able to selected the relating ATOP transform. Launching the procedure, Maltego will render all identified assets.
<p align="center">
  <img src="https://user-images.githubusercontent.com/968839/218276997-a2f36ce8-706b-456e-bdfb-53fc6b518a82.png" />
</p>
The graph will contain TON domain, nickname, domains and NFT related to an identified TON owner. **For a domain search, ATOP will make an extra pivoting trying to identify any possible ENS domain**, in this case ETH address and a first related ENS domain will add to the relations. 
<p align="center">
  <img src="https://user-images.githubusercontent.com/968839/218277133-507e7c44-fad3-44ca-8a13-d25e51c1fa5b.png" />
</p>

## TELEGRAM INTEGRATION

ATOP Maltego transform could be used to pivot from a TON NFT to a Telegram account. To enable this feature, we have to set up a .env file in the same directory of the transform script. To create such file, we can use the following command:

```
python3 telegram_sesssion_create.py on
```
To disable the Telegram integration, we have to run the same command with the "off" parameter.

```
python3 telegram_sesssion_create.py off
```


The .env file must contain the following variables:

```
API_ID=123456
API_HASH=aaaaaaaavvvvvvbbbbbbbbb1223
PHONE_NUMBER=+11234XXXXXX
SESSION_STRING=aabababababbababab123123...
```
If you will use session string, you don't need to set up the phone number. The session string is a string generated by the [Telethon](https://docs.telethon.dev/en/latest/) library.   
To generate a session string, you have to run the following command using atop:

You will be asked to insert your phone number and the OTP code. After that, the session string will be generated and you will be able to use it in the .env file.

```
 [!] Please enter your API ID: 123232132131
 [!] Please enter your API Hash: 12321312321321321321321
 [!] Please enter your phone number: +112312312312 ( sock puppet account BEWARE!! )
Please enter your phone (or bot token): >? +112312312312 ( sock puppet account BEWARE!! )
Please enter the code you received: >? 12345
Warning: Password input may be echoed.
Please enter your password: xxxxxxxx 
```
Check this for further information about [ATOP](https://github.com/aaarghhh/a_TON_of_privacy#telegram-pivoting).  
After that, you will be able to use the Telegram integration. Telegram integration will be enabled only for TON Telephone Number and TON Nickname entities, and will disable simply removing .env file or its configurtation.  
  
If your Telegram settings is properly configured, if some TON assets will be related to a Telegram account, you will be able to see the Telegram entity with its detail and Telegram profile picture in the graph.

<p align="center">
  <img src="https://github-production-user-asset-6210df.s3.amazonaws.com/968839/271732000-0b108579-7a21-4070-a1be-e208b79ad68c.png" />
</p>

---

## OPSEC CONSIDERATION
Beware, This is a new feature that requires a fine tune in order to avoid bad OPSEC mistake. 
Be sure setting up an empty Telegram account and use it as a sock puppet. **DO NOT USE YOUR PERSONAL TELEGRAM ACCOUNT!!!!**. 

---
**Keep in mind that Maltego CE supports only 12 new entities for a single transform, so the result could be incomplete.!!!** 